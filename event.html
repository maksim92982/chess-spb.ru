tournaments.js</script>
<script>
function parseRussianDate(dateString, monthNumber) {
    const months = {
        "января": 1, "февраля": 2, "марта": 3, "апреля": 4,
        "мая": 5, "июня": 6, "июля": 7, "августа": 8,
        "сентября": 9, "октября": 10, "ноября": 11, "декабря": 12
    };

    const year = monthNumber >= 13 ? 2026 : 2025;
    const realMonth = monthNumber >= 13 ? monthNumber - 12 : monthNumber;

    dateString = dateString.replace(/,/g, ' ').replace(/\s+/g, ' ').trim();

    const dateParts = dateString.match(/(\d+(?:-\d+)*)/g);
    const monthName = dateString.match(/([а-я]+)/i);

    if (!dateParts || !monthName) return null;

    const month = months[monthName[1]];

    const ranges = dateParts.map(r => {
        if (r.includes('-')) {
            const [startDay, endDay] = r.split('-');
            return {
                start: `${year}-${String(month).padStart(2, '0')}-${String(startDay).padStart(2, '0')}`,
                end: `${year}-${String(month).padStart(2, '0')}-${String(endDay).padStart(2, '0')}`
            };
        } else {
            return {
                start: `${year}-${String(month).padStart(2, '0')}-${String(r).padStart(2, '0')}`,
                end: `${year}-${String(month).padStart(2, '0')}-${String(r).padStart(2, '0')}`
            };
        }
    });

    return ranges;
}
</script>

<script>
// === Получаем ID ===
const params = new URLSearchParams(window.location.search);
const id = parseInt(params.get("id"));

const tournament = tournaments.find(t => t.id === id);

if (!tournament) {
    document.getElementById("eventContainer").innerHTML =
        "<h2>Турнир не найден</h2>";
} else {
    // === Подставляем данные ===


    document.querySelector('meta[name="description"]').content =
        `${tournament.name} — ${tournament.format}. Дата: ${tournament.date}.`;

    document.getElementById("eventContainer").innerHTML = `
        <h1>${tournament.name}</h1>
        <p><b>Дата:</b> ${tournament.date}</p>
        <p><b>Место:</b> ${tournament.location}</p>
        <p><b>Формат:</b> ${tournament.format}</p>
        <p><b>Группы:</b><br>${tournament.groups.join("<br>")}</p>
        <p><b>Взнос:</b> ${tournament.fee}</p>
        ${tournament.link}Регистрация</a>
    `;

    // === Schema.org ===
    const dates = parseRussianDate(tournament.date, tournament.month);

    const eventData = {
        "@context": "https://schema.org",
        "@type": "SportsEvent",
        "name": tournament.name,
        "startDate": dates[0].start,
        "endDate": dates[dates.length - 1].end,
        "location": {
            "@type": "Place",
            "name": tournament.location || "Санкт-Петербург"
        },
        "description": `Турнир: ${tournament.format}. ${tournament.groups.join(', ')}`
    };

    const script = document.createElement("script");
    script.type = "application/ld+json";
    script.textContent = JSON.stringify(eventData);
    document.head.appendChild(script);
}
</script>

</body>
</html>
